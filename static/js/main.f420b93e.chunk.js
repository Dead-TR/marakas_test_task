(this.webpackJsonpreact_counter=this.webpackJsonpreact_counter||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(30)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),s=a(8),i=a.n(s),l=a(5),o=a.n(l),m=a(9),u=a(2),p=a(11),v=(a(20),a(1)),_=a(13),d=(a(21),function(e){return{type:"title",value:e}}),b=function(e){return{type:"year",value:e}},f=function(e){return{type:"page",value:e}},g=a(10),y=(a(22),function(e){var t=e.story,a=e.store,n=e.SetUpdate,c=function(e){var c,r=Object(g.a)(t);try{for(r.s();!(c=r.n()).done;){var s=c.value;e.attributes["data-item-id"].value===String(s.id)&&(a.dispatch(d({title:s.title})),a.dispatch(b({year:s.year||""})),a.dispatch(f({page:1})),n())}}catch(i){r.e(i)}finally{r.f()}};return r.a.createElement("section",{className:"story"},r.a.createElement("div",{className:"story__btn",onClick:function(e){return function(e){if(e.target.closest(".story__btn")){var t=document.querySelector(".story__btn");t.classList.contains("story__btn_active")?t.classList.remove("story__btn_active"):t.classList.add("story__btn_active")}var a=document.querySelector(".story__content");a&&(a.classList.contains("story__content_active")?a.classList.remove("story__content_active"):a.classList.add("story__content_active"))}(e)}},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:"story__content"},t.map((function(e){return r.a.createElement("div",{className:"story__item",key:e.id,"data-item-id":e.id,onClick:function(e){e.target.classList.contains("story__item")?c(e.target):e.target.parentElement.classList.contains("story__item")&&c(e.target.parentElement)}},r.a.createElement("p",{className:"story__text"},e.title),r.a.createElement("p",{className:"story__text"},e.year))}))))}),E=function(e){var t=e.store,a=e.SetUpdate,n=e.story,s=e.SetStory,i=Object(c.useState)(""),l=Object(u.a)(i,2),o=l[0],m=l[1];return Object(c.useEffect)((function(){4!==o.length&&0!==o.length||t.dispatch(b({year:o}))}),[o]),r.a.createElement("section",{className:"search"},r.a.createElement("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),t.dispatch(f({page:1})),a(!0),s([].concat(Object(_.a)(n),[Object(v.a)(Object(v.a)({},t.getState()),{},{id:Date.now()})]))}},r.a.createElement("input",{type:"text",placeholder:"Title",className:"search__title",onChange:function(e){t.dispatch(d({title:e.target.value}))}}),r.a.createElement("select",{className:"search__type",onChange:function(e){t.dispatch({type:"type",value:{type:e.target.value}})},defaultValue:""},r.a.createElement("option",{value:"disable",disabled:!0},"Type"),r.a.createElement("option",{value:""},"All"),r.a.createElement("option",{value:"movie"},"Movie"),r.a.createElement("option",{value:"series"},"Series"),r.a.createElement("option",{value:"episode"},"Episode"),r.a.createElement("option",{value:"game"},"Game")),r.a.createElement("input",{type:"text",placeholder:"Year",className:"search__year",value:o,onChange:function(e){var t;t=e.target.value,m(t.split("").filter((function(e){return e.match(/[0-9]/g)?e:""})).join(""))}}),r.a.createElement("button",{className:"search__btn",type:"submit"},"Search")),r.a.createElement(y,{SetUpdate:a,store:t,story:n}))},N=(a(23),a(24),function(e){for(var t=e.store,a=e.pagesNumber,n=e.SetUpdate,c=[],s=t.getState().page,i=0;i<a;i++)c.push(i+1);for(var l=[].concat(c),o=function(e){return c.splice(e,1),"..."!==c[e-1]&&(c.splice(e,0,"..."),e++),e-1},m=0;m<c[m];m++)m>0&&c[m]<Number(a)&&(c[m]<Number(s)-2||c[m]>Number(s)+2)&&(m=o(m));return r.a.createElement("section",{className:"pages"},r.a.createElement("ul",{className:"pages__list"},c.map((function(e,a){var c;return"..."===e||e===Number(s)?(c=e===Number(s)?"pages__item pages__disable pages__active":"pages__item pages__disable",r.a.createElement("li",{className:c,key:l[a]},e)):r.a.createElement("li",{className:"pages__item",key:l[a],onClick:function(e){t.dispatch(f({page:e.target.innerText})),n(!0)}},e)}))))}),S=function(e){var t=e.store,a=e.SetUpdate,n=e.movies,c=e.pageNumber,s=e.SetPage,i=e.SetOpenedMovie;return r.a.createElement("section",{className:"result"},r.a.createElement("ul",{className:"result__list"},n.map((function(e){return r.a.createElement("li",{key:e.imdbID,className:"result__item"},r.a.createElement("a",{href:"/#",onClick:function(t){t.preventDefault(),i(Object(v.a)({},e))}},r.a.createElement("div",{className:"result__item-data"},r.a.createElement("h1",{className:"result__item-title"},e.Title),r.a.createElement("p",{className:"result__item-year"},e.Year)),"N/A"===e.Poster?r.a.createElement("img",{src:"/img/no-img.png",alt:e.Title,className:"result__item-poster"}):r.a.createElement("img",{src:e.Poster,alt:e.Title,className:"result__item-poster"})))}))),r.a.createElement("div",null,r.a.createElement(N,{store:t,pagesNumber:c,SetPage:s,SetUpdate:a})))},h=(a(25),function(e){var t=e.openedMovie,a=e.SetOpenedMovie,n=function(){a(null)};return r.a.createElement("section",{className:"active-movie",onClick:function(e){"active-movie"===e.target.className&&n()}},r.a.createElement("div",{className:"active-movie__item"},r.a.createElement("div",{className:"active-movie__data"},r.a.createElement("h1",{className:"active-movie__title"},t.Title),r.a.createElement("p",{className:"active-movie__text"},"Year: ",t.Year),r.a.createElement("p",{className:"active-movie__text"},"Type: ",t.Type),r.a.createElement("a",{className:"active-movie__link",target:"blank",href:"https://www.imdb.com/title/".concat(t.imdbID,"/")},"IMDB"),r.a.createElement("div",{className:"active-movie__close",onClick:function(e){return n()}})),"N/A"===t.Poster?r.a.createElement("img",{src:"/img/no-img.png",alt:t.Title,className:"active-movie__img"}):r.a.createElement("img",{src:t.Poster,alt:t.Title,className:"active-movie__img"})))}),O=(a(26),function(){return r.a.createElement("section",{className:"loader"},r.a.createElement("div",{className:"lds-facebook"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),j=Object(p.a)((function(e,t){var a;switch(t.type){case"title":a=Object(v.a)(Object(v.a)({},e),{},{title:t.value.title});break;case"type":a=Object(v.a)(Object(v.a)({},e),{},{type:t.value.type});break;case"year":a=Object(v.a)(Object(v.a)({},e),{},{year:t.value.year});break;case"page":a=Object(v.a)(Object(v.a)({},e),{},{page:t.value.page});break;default:a=Object(v.a)({},e)}return a}),JSON.parse(localStorage.getItem("imdbMovieList_savedState"))||{title:"",type:"",year:"",page:"1"}),k=function(){j.subscribe((function(){localStorage.setItem("imdbMovieList_savedState",JSON.stringify(j.getState()));var e=j.getState();n="http://www.omdbapi.com/?s=".concat(e.title,"&type=").concat(e.type,"&y=").concat(e.year,"&page=").concat(e.page,"&apikey=925bbb84")}));var e=Object(c.useState)(null),t=Object(u.a)(e,2),a=t[0],s=t[1],i=Object(c.useState)([]),l=Object(u.a)(i,2),p=l[0],v=l[1],_=Object(c.useState)(!1),d=Object(u.a)(_,2),b=d[0],f=d[1],g=Object(c.useState)(JSON.parse(localStorage.getItem("imdbMovieList_savedMovie"))||[]),y=Object(u.a)(g,2),N=y[0],k=y[1],M=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json().then((function(e){k(e),localStorage.setItem("imdbMovieList_savedMovie",JSON.stringify(e))})).catch((function(e){console.log("===> ERROR <=== [",e,"]")}));case 4:f(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){return M()}}),[b]),r.a.createElement("section",{className:"base"},r.a.createElement(E,{SetUpdate:f,store:j,story:p,SetStory:v}),!0===b&&r.a.createElement(O,null),null!==a&&r.a.createElement(h,{openedMovie:a,SetOpenedMovie:s}),"True"===N.Response?r.a.createElement(S,{store:j,movies:N.Search,SetUpdate:f,SetOpenedMovie:s,pageNumber:Math.ceil(N.totalResults/10)}):r.a.createElement("div",{className:"bace__error"},r.a.createElement("p",{className:"bace__error-message"},N.Error)))},M=(a(29),function(){return r.a.createElement(k,null)});i.a.render(r.a.createElement(M,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.f420b93e.chunk.js.map