(this.webpackJsonpreact_counter=this.webpackJsonpreact_counter||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(30)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var c,n=a(0),r=a.n(n),s=a(8),i=a.n(s),l=a(5),o=a.n(l),m=a(9),u=a(2),v=a(11),p=(a(20),a(1)),_=a(13),d=(a(21),function(e){return{type:"title",value:e}}),b=function(e){return{type:"year",value:e}},g=function(e){return{type:"page",value:e}},y=a(10),f=(a(22),function(e){var t=e.story,a=e.store,c=e.SetUpdate,n=function(e){var n,r=Object(y.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;e.attributes["data-item-id"].value===String(s.id)&&(a.dispatch(d({title:s.title})),a.dispatch(b({year:s.year||""})),a.dispatch(g({page:1})),c())}}catch(i){r.e(i)}finally{r.f()}};return r.a.createElement("section",{className:"story"},r.a.createElement("div",{className:"story__btn",onClick:function(e){return function(e){if(e.target.closest(".story__btn")){var t=document.querySelector(".story__btn");t.classList.contains("story__btn_active")?t.classList.remove("story__btn_active"):t.classList.add("story__btn_active")}var a=document.querySelector(".story__content");a&&(a.classList.contains("story__content_active")?a.classList.remove("story__content_active"):a.classList.add("story__content_active"))}(e)}},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:"story__content"},t.map((function(e){return r.a.createElement("div",{className:"story__item",key:e.id,"data-item-id":e.id,onClick:function(e){e.target.classList.contains("story__item")?n(e.target):e.target.parentElement.classList.contains("story__item")&&n(e.target.parentElement)}},r.a.createElement("p",{className:"story__text"},e.title),r.a.createElement("p",{className:"story__text"},e.year))}))))}),E=function(e){var t=e.store,a=e.SetUpdate,c=e.story,s=e.SetStory,i=Object(n.useState)(t.getState().title),l=Object(u.a)(i,2),o=l[0],m=l[1],v=Object(n.useState)(t.getState().year),y=Object(u.a)(v,2),E=y[0],N=y[1],S=Object(n.useState)(t.getState().type),h=Object(u.a)(S,2),O=h[0],j=h[1];return r.a.createElement("section",{className:"search",id:"search-bar"},r.a.createElement("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),t.dispatch(g({page:1})),a(!0),s([].concat(Object(_.a)(c),[Object(p.a)(Object(p.a)({},t.getState()),{},{id:Date.now()})]))}},r.a.createElement("input",{type:"text",placeholder:"Title",className:"search__title",value:o,onChange:function(e){m(e.target.value),t.dispatch(d({title:e.target.value}))}}),r.a.createElement("select",{className:"search__type",value:O,onChange:function(e){j(e.target.value||""),t.dispatch({type:"type",value:{type:e.target.value}})}},r.a.createElement("option",{value:""},"All"),r.a.createElement("option",{value:"movie"},"Movie"),r.a.createElement("option",{value:"series"},"Series"),r.a.createElement("option",{value:"episode"},"Episode"),r.a.createElement("option",{value:"game"},"Game")),r.a.createElement("input",{type:"number",placeholder:"Year",className:"search__year",value:E,onChange:function(e){N(e.target.value),(0===e.target.value.length||4===e.target.value.length)&&t.dispatch(b({year:e.target.value}))}}),r.a.createElement("button",{className:"search__btn",type:"submit"},"Search")),r.a.createElement(f,{SetUpdate:a,store:t,story:c}))},N=(a(23),a(24),function(e){for(var t=e.store,a=e.pagesNumber,c=e.SetUpdate,n=[],s=t.getState().page,i=0;i<a;i++)n.push(i+1);for(var l=[].concat(n),o=function(e){return n.splice(e,1),"..."!==n[e-1]&&(n.splice(e,0,"..."),e++),e-1},m=0;m<n[m];m++)m>0&&n[m]<Number(a)&&(n[m]<Number(s)-2||n[m]>Number(s)+2)&&(m=o(m));return r.a.createElement("section",{className:"pages"},r.a.createElement("ul",{className:"pages__list"},n.map((function(e,a){var n;return"..."===e||e===Number(s)?(n=e===Number(s)?"pages__item pages__disable pages__active":"pages__item pages__disable",r.a.createElement("li",{className:n,key:l[a]},e)):r.a.createElement("li",{className:"pages__item",key:l[a],onClick:function(e){t.dispatch(g({page:e.target.innerText})),c(!0)}},e)}))))}),S=function(e){var t=e.store,a=e.SetUpdate,c=e.movies,n=e.pageNumber,s=e.SetOpenedMovie;return r.a.createElement("section",{className:"result"},r.a.createElement("ul",{className:"result__list"},c.map((function(e){return r.a.createElement("li",{key:e.imdbID,className:"result__item"},r.a.createElement("a",{href:"/#",onClick:function(t){t.preventDefault(),s(Object(p.a)({},e))}},r.a.createElement("div",{className:"result__item-data"},r.a.createElement("h1",{className:"result__item-title"},e.Title),r.a.createElement("p",{className:"result__item-year"},e.Year)),"N/A"===e.Poster?r.a.createElement("img",{src:"/img/no-img.png",alt:e.Title,className:"result__item-poster"}):r.a.createElement("img",{src:e.Poster,alt:e.Title,className:"result__item-poster"})))}))),r.a.createElement("div",null,r.a.createElement(N,{store:t,pagesNumber:n,SetUpdate:a})))},h=(a(25),function(e){var t=e.openedMovie,a=e.SetOpenedMovie,c=function(){a(null)};return r.a.createElement("section",{className:"active-movie",onClick:function(e){"active-movie"===e.target.className&&c()}},r.a.createElement("div",{className:"active-movie__item"},r.a.createElement("div",{className:"active-movie__data"},r.a.createElement("h1",{className:"active-movie__title"},t.Title),r.a.createElement("p",{className:"active-movie__text"},"Year: ",t.Year),r.a.createElement("p",{className:"active-movie__text"},"Type: ",t.Type),r.a.createElement("a",{className:"active-movie__link",target:"blank",href:"https://www.imdb.com/title/".concat(t.imdbID,"/")},"IMDB"),r.a.createElement("div",{className:"active-movie__close",onClick:function(e){return c()}})),"N/A"===t.Poster?r.a.createElement("img",{src:"/img/no-img.png",alt:t.Title,className:"active-movie__img"}):r.a.createElement("img",{src:t.Poster,alt:t.Title,className:"active-movie__img"})))}),O=(a(26),function(){return r.a.createElement("section",{className:"loader"},r.a.createElement("div",{className:"lds-facebook"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),j=Object(v.a)((function(e,t){var a;switch(t.type){case"title":a=Object(p.a)(Object(p.a)({},e),{},{title:t.value.title});break;case"type":a=Object(p.a)(Object(p.a)({},e),{},{type:t.value.type});break;case"year":a=Object(p.a)(Object(p.a)({},e),{},{year:t.value.year});break;case"page":a=Object(p.a)(Object(p.a)({},e),{},{page:t.value.page});break;default:a=Object(p.a)({},e)}return a}),JSON.parse(localStorage.getItem("imdbMovieList_savedState"))||{title:"",type:"",year:"",page:"1"}),k=function(){j.subscribe((function(){localStorage.setItem("imdbMovieList_savedState",JSON.stringify(j.getState())),c="https://www.omdbapi.com/?s=".concat(j.getState().title,"&type=").concat(j.getState().type,"&y=").concat(j.getState().year,"&page=").concat(j.getState().page,"&apikey=925bbb84")})),""===j.getState().title&&localStorage.removeItem("imdbMovieList_savedMovie");var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)([]),l=Object(u.a)(i,2),v=l[0],p=l[1],_=Object(n.useState)(!1),d=Object(u.a)(_,2),b=d[0],g=d[1],y=Object(n.useState)(JSON.parse(localStorage.getItem("imdbMovieList_savedMovie"))||[]),f=Object(u.a)(y,2),N=f[0],k=f[1],M=function(){var e=Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(c);case 2:return e.next=4,e.sent.json().then((function(e){k(e),localStorage.setItem("imdbMovieList_savedMovie",JSON.stringify(e)),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(){document.location.reload()}));case 4:g(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return M()}}),[b]),r.a.createElement("section",{className:"base"},r.a.createElement(E,{SetUpdate:g,store:j,story:v,SetStory:p}),!0===b&&r.a.createElement(O,null),null!==a&&r.a.createElement(h,{openedMovie:a,SetOpenedMovie:s}),"True"===N.Response?r.a.createElement(S,{store:j,movies:N.Search,SetUpdate:g,SetOpenedMovie:s,pageNumber:Math.ceil(N.totalResults/10)}):r.a.createElement("div",{className:"bace__error"},r.a.createElement("p",{className:"bace__error-message"},N.Error)))},M=(a(29),function(){return r.a.createElement(k,null)});i.a.render(r.a.createElement(M,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.5a64292e.chunk.js.map